@{
   Layout = "~/_Layout.cshtml";
   Page.Width = "Delete a Quote";

   var first = "";
   var last = "";
   var width = "";
   var depth = "";
   var drawers = "";
   var material = "";
   var rushDays = "";
   var quoteId = "";

   if (!IsPost)
   {
      if (!Request.QueryString["ID"].IsEmpty() && Request.QueryString["ID"].AsInt() > 0)
      {
         quoteId = Request.QueryString["ID"];
         var db = Database.Open("MegaDeskdb");
         var dbCommand = "SELECT * FROM customer INNER JOIN order ON customer.customer_id = order.customer_id INNER JOIN desk ON order.order_id = desk.order_id WHERE first_name = @0";
         var row = db.QuerySingle(dbCommand, quoteId);
         if (row != null)
         {
            first = row.first_name;
            last = row.last_name;
            width = row.width;
            depth = row.depth;
            drawers = row.dwr_number;
            material = row.surface_mat;
            rushDays = row.shipping_spd;
         }
         else
         {
            Validation.AddFormError("No quote was found for that ID.");
         }
      }
      else
      {
         Validation.AddFormError("No quote was found for that ID.");
      }
   }

   if (IsPost && !Request["buttonDelete"].IsEmpty())
   {
      quoteId = Request.Form["quoteId"];
      var db = Database.Open("MegaDeskdb");
      var deleteCommand = "DELETE FROM Desk WHERE ID = @0";
      db.Execute(deleteCommand, quoteId); 
      Response.Redirect("~/ViewQuotes");
   }

}

<h2>Delete a Quote</h2>
@Html.ValidationSummary()
<p><a href="~/ViewQuotes">Return to quote listing</a></p>

<form method="post">
   <fieldset>
      <legend>Quote Information</legend>

      <p>
         <span>First Name:</span>
         <span>@first</span>
      </p>

      <p>
         <span>Last Name:</span>
         <span>@last</span>
      </p>

      <p>
         <span>Width:</span>
         <span>@width</span>
      </p>

      <p>
         <span>Depth:</span>
         <span>@depth</span>
      </p>

      <p>
         <span>Drawers:</span>
         <span>@drawers</span>
      </p>

      <p>
         <span>Material:</span>
         <span>@material</span>
      </p>

      <p>
         <span>Rush Days:</span>
         <span>@rushDays</span>
      </p>

      <input type="hidden" name="quoteid" value="@quoteId" />
      <p><input type="submit" name="buttonDelete" value="Delete Quote" /></p>
   </fieldset>
</form>